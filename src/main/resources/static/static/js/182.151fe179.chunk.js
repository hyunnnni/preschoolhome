"use strict";(self.webpackChunkkindergarden=self.webpackChunkkindergarden||[]).push([[182],{8182:(e,n,s)=>{s.r(n),s.d(n,{default:()=>B});var c,a,i=s(3990),t=s(3955),o=s(2791),r=s(8188),l=s(7689),d=s(1087),h=s(724),m=s(168),g=s(7323);const p=g.Z.div(c||(c=(0,m.Z)(["\n  position: relative;\n"]))),u=g.Z.div(a||(a=(0,m.Z)(['\n  position: relative;\n  width: 3rem;\n  margin-right: -0.5rem;\n  cursor: pointer;\n  img {\n    width: 100%;\n  }\n\n  :after {\n    content: "";\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 0.7rem;\n    height: 0.7rem;\n    background: ',";\n    border-radius: 50%;\n    display: ",";\n  }\n"])),t.O9.orangeDeep,(e=>e.state?"block":"none"));var j=s(184);const x=e=>{let{state:n}=e;return(0,j.jsx)(p,{children:(0,j.jsx)(u,{state:n,children:(0,j.jsx)("img",{src:"/images/common/bell_icon.svg"})})})};var k=s(6030),f=s(9386);const{persistAtom:b}=(0,f.J)(),v=(0,k.cn)({key:"pushState",default:{totalCnt:0,pushList:{}},effects_UNSTABLE:[b]});var y=s(4702),C=s(5096);const L=(0,y.ZF)({apiKey:"AIzaSyCuIKs9JwV9hTJyHRpthcaeZesm0h-Av1A",authDomain:"preschoolhome-dfd2f.firebaseapp.com",projectId:"preschoolhome-dfd2f",storageBucket:"preschoolhome-dfd2f.appspot.com",messagingSenderId:"1048681571637",appId:"1:1048681571637:web:814c80c8d96efd581b187c",measurementId:"G-0XB87NYZ32"}),w=(0,C.KL)(L),U=async()=>await(0,C.LP)(w,{vapidKey:"BIGyGypgvEnUf_IZ6F_4nORnyj759Hpr3B4qAW5-q1VCJndDdabc87cjOyn4E83PkosZeEbToaGk2Nt0qhmufGk"});var Z=s(4880),N=s(3014);const F="".concat(N.L,"/api/parent/firebase-token"),I="".concat(N.L,"/api/teacher/firebase-token"),S=async e=>{try{e(await U())}catch(n){console.log(n)}},T=()=>{const e=(0,l.s0)(),n=(new Date).getFullYear(),{moveToPath:s,doLogout:c,loginState:a,isLogin:i,isAdminLogin:m,isParentLogin:g,isTeacherLogin:p,refreshAccessToken:u}=(0,h.Z)(),f=a.kidList,b=i&&!p?0:a.iclass,y=a.iteacher,L=()=>{c(),s("/")},[U,N]=(0,k.FV)(v);(0,o.useEffect)((()=>{"granted"!==Notification.permission?Notification.requestPermission().then((e=>{"granted"===e&&S(T)})):S(T)}),[a]);const T=e=>{if((g?a.prFirebaseToken:a.firebaseToken)!==e&&a.accessToken){let n={iteacher:a.iteacher,firebaseToken:e};g?(n={iparent:a.iparent,firebaseToken:e},(async e=>{let{params:n,successFn:s}=e;try{const e=await Z.Z.patch("".concat(F),n);"2"===e.status.toString().charAt(0)&&s(e)}catch(c){console.log(c)}})({params:n,successFn:A})):(async e=>{let{params:n,successFn:s}=e;try{const e=await Z.Z.patch("".concat(I),n);"2"===e.status.toString().charAt(0)&&s(e)}catch(c){console.log(c)}})({params:n,successFn:A}),console.log(n)}},A=e=>{u()};return new Promise((e=>{(0,C.ps)(w,(n=>{console.log("onMessage"),console.log(n),e(n)}))})).then((e=>{const n=JSON.parse(e.data);console.log(n),N((e=>{const s={...e},c=s.pushList[n.idm]||{unCheckedMsgCnt:0,data:null};return c.unCheckedMsgCnt++,c.data=n,s.pushList[n.idm]=c,s.totalCnt++,s}))})).catch((e=>console.log(e))),console.log(U),(0,j.jsxs)(t.Rw,{children:[(0,j.jsx)(d.rU,{to:"/",className:"nav-logo",children:(0,j.jsx)("img",{src:"/images/common/header/logo.svg"})}),(0,j.jsx)("p",{children:i?"".concat(a.teacherNm," \ud658\uc601\ud569\ub2c8\ub2e4."):g?"\ud559\ubd80\ubaa8\ub2d8 \ud658\uc601\ud569\ub2c8\ub2e4.":null}),m?null:(0,j.jsx)(x,{state:0!==U.totalCnt}),(0,j.jsx)(t.rM,{children:i?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.i5,{className:"nav-btn",onClick:s=>e("/ind?year=".concat(n,"&page=1&iclass=").concat(b)),children:"\uc54c\ub9bc\uc7a5\ubaa9\ub85d"}),(0,j.jsx)(r.o4,{className:"nav-btn",onClick:n=>e("/admin?page=1&iclass=".concat(b)),children:"\ud559\ubd80\ubaa8\uad00\ub9ac"}),(0,j.jsx)(r.iI,{className:"nav-btn",onClick:n=>e("/admin/student?page=1&kidCheck=".concat(b)),children:"\uc6d0\uc0dd\uad00\ub9ac"}),p?(0,j.jsx)(r.s2,{className:"nav-btn",onClick:n=>e("/admin/teacher/edit?iteacher=".concat(y)),children:"\uc815\ubcf4\uc218\uc815"}):null,(0,j.jsx)(r.lk,{onClick:()=>{L()},children:"\ub85c\uadf8\uc544\uc6c3"})]}):g?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.i5,{className:"nav-btn",onClick:s=>e("/ind?year=".concat(n,"&page=1&ikid=").concat(f[0]?f[0].ikid:0)),children:"\uc54c\ub9bc\uc7a5"}),(0,j.jsx)(r.iI,{className:"nav-btn",onClick:s=>e("/mypage?year=".concat(n,"&ikid=").concat(f[0]?f[0].ikid:0)),children:"\ub9c8\uc774\ud398\uc774\uc9c0"}),(0,j.jsx)(r.lk,{onClick:()=>{L()},children:"\ub85c\uadf8\uc544\uc6c3"})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.iI,{onClick:n=>e("user/accounts"),children:"\ud68c\uc6d0\uac00\uc785"}),(0,j.jsx)(r.lk,{onClick:n=>e("login"),children:"\ub85c\uadf8\uc778"})]})})]})},A=()=>(0,j.jsxs)(t.xq,{children:[(0,j.jsx)(t.SQ,{}),(0,j.jsx)(t.ae,{children:(0,j.jsx)(d.rU,{to:"/",children:"copyright \ub5a1\uc78e\ubc29\ubc94\ub300"})})]});var P=s(6199),E=s(2949);const D=()=>{const{isLogin:e,isParentLogin:n,isTeacherLogin:s,loginState:c}=(0,h.Z)(),a=(new Date).getFullYear(),i=c.kidList,t=e&&!s?0:c.iclass;function o(e,n,s,c,a){return{key:n,icon:s,children:c,label:e,type:a}}const r=[o((0,j.jsx)(d.rU,{to:"/admin?page=1&iclass=".concat(t),children:"\ud559\ubd80\ubaa8 \uad00\ub9ac"}),"5-1"),o((0,j.jsx)(d.rU,{to:"/admin/student?page=1&kidCheck=".concat(t),children:"\uc6d0\uc0dd \uad00\ub9ac"}),"5-2"),o((0,j.jsx)(d.rU,{to:"/admin/student/create",children:"\uc6d0\uc0dd \ub4f1\ub85d"}),"5-3"),o((0,j.jsx)(d.rU,{to:"/ind?year=".concat(a,"&page=1&iclass=").concat(t),children:"\uc54c\ub9bc\uc7a5 \ubaa9\ub85d"}),"5-4")],l=[o("\uc720\uce58\uc6d0 \uc548\ub0b4","1",(0,j.jsx)("img",{src:"/images/common/sidebar/info_icon.svg"}),[o((0,j.jsx)(d.rU,{to:"/info/",children:"\uc720\uce58\uc6d0 \uc18c\uac1c"}),"1-1"),o((0,j.jsx)(d.rU,{to:"/info/class",children:"\uc720\uce58\uc6d0 \ud604\ud669"}),"1-2"),o((0,j.jsx)(d.rU,{to:"/info/location",children:"\uc624\uc2dc\ub294 \uae38"}),"1-3")]),o("\uad50\uc721\uc815\ubcf4","2",(0,j.jsx)("img",{src:"/images/common/sidebar/education.svg"}),[o((0,j.jsx)(d.rU,{to:"/edu/hospital?page=1",children:"\uc608\ubc29\uc811\uc885\uae30\uad00\uc815\ubcf4"}),"2-3")]),o("\ud65c\ub3d9\uc568\ubc94","3",(0,j.jsx)(d.rU,{to:"/album",children:(0,j.jsx)("img",{src:"/images/common/sidebar/gallery.svg"})})),o("\uc720\uce58\uc6d0 \uc18c\uc2dd","4",(0,j.jsx)(d.rU,{to:"/notice",children:(0,j.jsx)("img",{src:"/images/common/sidebar/news.svg"})}))];return e&&!s&&l.push(o("\uad00\ub9ac\uc790","5",(0,j.jsx)("img",{src:"/images/common/sidebar/manager.svg"}),r.concat([o((0,j.jsx)(d.rU,{to:"/admin/teacher?page=1&iclass=".concat(t,"&tcIsDel=0"),children:"\uc120\uc0dd\ub2d8 \uad00\ub9ac"}),"5-5")]))),s&&l.push(o("\uad00\ub9ac\uc790","5",(0,j.jsx)("img",{src:"/images/common/sidebar/manager.svg"}),r)),n&&l.push(o("\ud68c\uc6d0\uc804\uc6a9","6",(0,j.jsx)("img",{src:"/images/common/sidebar/user.svg"}),[o((0,j.jsx)(d.rU,{to:"/ind?year=".concat(a,"&page=1&ikid=").concat(i[0]?i[0].ikid:0),children:"\uc54c\ub9bc\uc7a5"}),"6-1"),o((0,j.jsx)(d.rU,{to:"/mypage?year=".concat(a,"&ikid=").concat(i[0]?i[0].ikid:0),children:"\ub9c8\uc774\ud398\uc774\uc9c0"}),"6-2")])),(0,j.jsx)(E.Z,{defaultSelectedKeys:[""],mode:"inline",items:l,style:{border:0}})},q=()=>{const[e,n]=(0,o.useState)(!1),s=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const c=c=>{window.innerWidth<=798&&!e&&!s.current.contains(c.target)&&n(!0)};return document.addEventListener("click",c),()=>document.removeEventListener("click",c)}),[e]),(0,j.jsx)(t.WP,{ref:s,children:(0,j.jsxs)(P.Z,{breakpoint:"lg",onCollapse:(e,s)=>{n(!0)},trigger:null,collapsible:!0,collapsed:e,theme:"light",children:[(0,j.jsx)(t.Z3,{children:(0,j.jsx)(d.rU,{to:"/",children:e?(0,j.jsx)("img",{src:"/images/common/header/smallLogo.svg"}):(0,j.jsx)("img",{src:"/images/common/header/logo.svg"})})}),(0,j.jsx)(D,{}),(0,j.jsx)(r.sd,{type:"text",onClick:()=>n(!e),children:e?"\ud3bc\uce58\uae30":"\uc811\uae30"})]})})},B=e=>{let{children:n}=e;return(0,j.jsxs)(t.Fw,{className:"layout-wrap",children:[(0,j.jsx)(q,{}),(0,j.jsxs)(i.Z,{children:[(0,j.jsx)(T,{}),(0,j.jsx)(t.Py,{children:(0,j.jsx)(l.j3,{})})]}),(0,j.jsx)(A,{})]})}}}]);
//# sourceMappingURL=182.151fe179.chunk.js.map