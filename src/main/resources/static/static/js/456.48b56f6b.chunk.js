"use strict";(self.webpackChunkkindergarden=self.webpackChunkkindergarden||[]).push([[456],{213:(a,e,s)=>{s.d(e,{IA:()=>n,cF:()=>r,f:()=>o});var c=s(4880),t=s(3014);const i="".concat(t.L,"/api/memory"),n=async a=>{let{page:e,iclass:s,ikid:t,search:n,successFn:r,failFn:o,errorFn:l}=a;try{const a=await c.Z.get("".concat(i,"?page=").concat(e,"&iclass=").concat(s,"&ikid=0&search=").concat(n));"2"===a.status.toString().charAt(0)?r(a.data):o(a.data)}catch(d){l(d.response.data.message)}},r=async a=>{let{page:e,iclass:s,ikid:t,search:n,successFn:r,failFn:o,errorFn:l}=a;try{const a=await c.Z.get("".concat(i,"?page=").concat(e,"&iclass=").concat(s,"&ikid=").concat(t,"&search=").concat(n));"2"===a.status.toString().charAt(0)?r(a.data):o(a.data)}catch(d){l(d.response.data.message)}},o=async a=>{let{product:e,successFn:s,failFn:t,errorFn:n}=a;try{const a=await c.Z.post("".concat(i),e);"2"===a.status.toString().charAt(0)?s(a.data):t("\uae00 \ub4f1\ub85d \uc624\ub958")}catch(r){const a=r.response.data;console.log("res",a),"PUSH_FAIL"===a.code?n("\ud478\uc26c\uc54c\ub9bc\uc5d0 \ube44\ub3d9\uc758 \uc0c1\ud0dc\uc785\ub2c8\ub2e4."):n(a.message)}}},456:(a,e,s)=>{s.r(e),s.d(e,{default:()=>x});var c=s(6834),t=s(2791),i=s(5847),n=(s(3955),s(3353)),r=s(4155),o=s(7689),l=s(1087),d=s(724),g=(s(8199),s(184));const h=a=>{let{listData:e,year:s,ikid:c,iclass:t,page:i}=a;const{loginState:r,isLogin:o,isParentLogin:l}=(0,d.Z)();return(0,g.jsx)(n.ti,{children:(0,g.jsx)(n.lt,{children:console.log("listData",e)})})};var u=s(3359),p=s(1717),k=s(747),m=s(5816),y=s(2603),f=s(8188),F=s(213);const j=[{cmtCheck:0,createdAt:"",iclass:0,inotice:0,kidNm:"",noticeCheck:0,noticeContents:"",noticeTitle:"",picCheck:0}],x=()=>{const a=(0,o.s0)(),{pathname:e,search:s}=(0,o.TH)(),[x,S]=(0,l.lr)(),[L,T]=(0,t.useState)(j),[C,Z]=(0,t.useState)(3),[b,w]=(0,t.useState)(0),A=(new Date).getFullYear(),V=x.get("year"),v=x.get("ikid"),N=x.get("page"),D=x.get("iclass"),U=x.get("searchValue")||"",{loginState:I,isLogin:P,isParentLogin:z,isTeacherLogin:H,isAdminLogin:O}=(0,d.Z)(),_=I.kidList,[q,B]=(0,t.useState)(""),[E,Y]=(0,t.useState)(""),[G,J]=(0,t.useState)(!1),[K,M]=(0,t.useState)();(0,t.useEffect)((()=>{if(z){if("0"===v)return B("\uc5f0\uacb0 \uc624\ub958"),Y("\uc5f0\uacb0\ub41c \uc6d0\uc0dd \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),M(-1),void J(!0);(0,F.cF)({page:N,iclass:D,ikid:v,search:U,errorFn:R,successFn:Q})}else if(P){if(!(H&&D==I.iclass||O))return B("\uc811\uadfc \uc81c\ud55c"),Y("\ub2f4\ub2f9\ud55c \ubc18 \uc568\ubc94\ub9cc \uc5f4\ub78c \uac00\ub2a5\ud569\ub2c8\ub2e4."),M(-1),void J(!0);(0,F.IA)({page:N,iclass:D,ikid:v,search:U,errorFn:R,successFn:Q})}else J(!0),B("\ud68c\uc6d0 \uc804\uc6a9 \ud398\uc774\uc9c0"),Y("\ub85c\uadf8\uc778 \ud68c\uc6d0\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4."),M("/login")}),[V,v,D,N,C]);const Q=a=>{T(a.list),w(a.noticeCnt)},R=a=>{console.log(a);const e=P?"/ind/album?year=".concat(V,"&page=1&iclass=").concat(D,"&searchValue=").concat(U):"/ind/album?year=".concat(V,"&page=1&ikid=").concat(v,"&searchValue=").concat(U);3!=C?(Z(3),M(e)):M(-1)},W=a=>{J(!0),B("\ub370\uc774\ud130 \uc5c6\uc74c"),Y(a),S({page:1,year:V,iclass:D,fromTo:C,searchValue:""})};return(0,g.jsxs)(n.Nm,{children:[(0,g.jsx)(p.Z,{isOpen:G,handleOk:()=>{J(!1),K&&a(K)},title:q,subTitle:E}),(0,g.jsxs)(n.eN,{children:[z?(0,g.jsx)(l.rU,{to:"/ind?year=".concat(A,"&page=1&iclass=").concat(D,"&ikid=").concat(v),children:"\uc54c\ub9bc\uc7a5"}):(0,g.jsx)(l.rU,{to:"/ind?year=".concat(A,"&page=1&iclass=").concat(D),children:"\uc54c\ub9bc\uc7a5"}),(0,g.jsx)(l.rU,{to:"/ind/album".concat(s),className:"active",children:"\ucd94\uc5b5\uc568\ubc94"})]}),(0,g.jsxs)(r.BV,{className:"ind-btn-wrap",children:[P?(0,g.jsx)(n.ih,{fromTo:C,isLogin:P}):(0,g.jsx)(n.ih,{fromTo:C,isLogin:z}),(0,g.jsxs)(r.hs,{children:[P?(0,g.jsx)(m.Z,{iclass:D,indList:L,year:V,page:N}):(0,g.jsx)(k.Z,{ikidList:_,indList:L,ikid:v,year:V,page:N}),(0,g.jsx)(y.Z,{placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694.",allowClear:!0,onSearch:a=>{(a=>{z?((0,u.Dq)({page:1,year:V,ikid:v,fromTo:C,search:a,errorFn:W,successFn:Q}),S({page:1,year:V,ikid:v,fromTo:C,searchValue:a})):P&&((0,u.yu)({page:1,year:V,iclass:D,fromTo:C,search:a,errorFn:W,successFn:Q}),S({page:1,year:V,iclass:D,fromTo:C,searchValue:a}))})(a)},size:"large"}),P?(0,g.jsx)(f.lk,{onClick:()=>{a("/ind/album/write")},className:"btn",children:"\uae00\uc4f0\uae30"}):null]})]}),(0,g.jsx)(h,{listData:L,year:V,ikid:v,iclass:D,page:N}),(0,g.jsx)(i.V_,{children:(0,g.jsx)(c.Z,{defaultCurrent:N,total:b,pageSize:12,onChange:(e,s)=>{a(P?"/ind?year=".concat(V,"&page=").concat(e,"&iclass=").concat(D,"&fromTo=").concat(C):"/ind?year=".concat(V,"&page=").concat(e,"&ikid=").concat(v,"&fromTo=").concat(C))}})})]})}}}]);
//# sourceMappingURL=456.48b56f6b.chunk.js.map