{"version":3,"file":"static/js/2077.96a33d69.chunk.js","mappings":"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","sources":["components/ui/ModalTwoBtn.js","pages/adminPage/GuardianList.js"],"sourcesContent":["import { Modal } from \"antd\";\r\nimport React from \"react\";\r\nimport { OrangeBtn, PinkBtn } from \"../../styles/ui/buttons\";\r\nimport { ModalBody, ModalTitle } from \"../../styles/ui/warning\";\r\n\r\nconst ModalTwoBtn = ({\r\n  isOpen,\r\n  handleOk,\r\n  handleCancel,\r\n  title,\r\n  subTitle,\r\n  children,\r\n}) => {\r\n  const modalStyles = {\r\n    footer: {\r\n      display: \"flex\",\r\n      justifyContent: \"center\",\r\n      gap: \"2rem\",\r\n    },\r\n    body: {\r\n      paddingTop: \"2rem\",\r\n    },\r\n  };\r\n  return (\r\n    <Modal\r\n      open={isOpen}\r\n      onOk={handleOk}\r\n      onCancel={handleCancel}\r\n      closeIcon={null}\r\n      width={400}\r\n      footer={[\r\n        <PinkBtn key=\"submit\" type=\"primary\" onClick={handleOk}>\r\n          확인\r\n        </PinkBtn>,\r\n        <OrangeBtn key=\"back\" onClick={handleCancel}>\r\n          취소\r\n        </OrangeBtn>,\r\n      ]}\r\n      styles={modalStyles}\r\n    >\r\n      <ModalTitle>\r\n        <h3>{title}</h3>\r\n        <p>{subTitle}</p>\r\n      </ModalTitle>\r\n      <ModalBody>{children}</ModalBody>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ModalTwoBtn;\r\n","import { Button, Dropdown, Select } from \"antd\";\r\nimport Search from \"antd/es/input/Search\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { UserTop, UserTopRight } from \"../../styles/adminstyle/guardianlist\";\r\nimport { PageTitle } from \"../../styles/basic\";\r\nimport { GreenBtn } from \"../../styles/ui/buttons\";\r\nimport GuardianListComponent from \"../../components/adminpage/GuardianListComponent\";\r\nimport ModalTwoBtn from \"../../components/ui/ModalTwoBtn\";\r\nimport {\r\n  deleteParentList,\r\n  getAdminParentList,\r\n} from \"../../api/adminPage/admin_api\";\r\nimport ModalOneBtn from \"../../components/ui/ModalOneBtn\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { Link, useSearchParams } from \"react-router-dom\";\r\nimport { DownOutlined } from \"@ant-design/icons\";\r\nimport useCustomLogin from \"../../hooks/useCustomLogin\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst initParentList = {\r\n  totalCnt: 0,\r\n  parentPage: [\r\n    {\r\n      iparent: 0,\r\n      parentNm: \"\",\r\n      uid: \"\",\r\n      phoneNb: \"\",\r\n      kids: [\r\n        {\r\n          kidNm: \"\",\r\n          iclass: 0,\r\n        },\r\n      ],\r\n    },\r\n  ],\r\n};\r\nconst GuardianList = () => {\r\n  const [serchParams, setSearchParams] = useSearchParams();\r\n  const [changeInfo, setChangeInfo] = useState(0);\r\n  const navigate = useNavigate();\r\n  const page = serchParams.get(\"page\");\r\n  const iclass = serchParams.get(\"iclass\");\r\n  const dispatch = useDispatch();\r\n\r\n  // const refresh = useSelector(state => state.refresh);\r\n  // console.log(\"refresh\", refresh);\r\n\r\n  // 반 선택\r\n  const classArr = [\r\n    { iclass: 0, classNm: \"반 전체\" },\r\n    { iclass: 1, classNm: \"무궁화반\" },\r\n    { iclass: 2, classNm: \"해바라기반\" },\r\n    { iclass: 3, classNm: \"장미반\" },\r\n  ];\r\n\r\n  const classItems =\r\n    Array.isArray(classArr) &&\r\n    classArr.map(item => {\r\n      return {\r\n        key: item.iclass.toString(),\r\n        label: (\r\n          <Link to={`/admin?page=${page}&iclass=${item.iclass}`}>\r\n            {item.classNm}\r\n          </Link>\r\n        ),\r\n      };\r\n    });\r\n\r\n  // 모달창 내용\r\n  const [title, setTitle] = useState(\"\");\r\n  const [subTitle, setSubTitle] = useState(\"\");\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isNavigate, setIsNavigate] = useState();\r\n\r\n  // 학부모 정보 삭제\r\n  const [checkedItems, setCheckedItems] = useState([]);\r\n\r\n  const oncheckedClick = item => {\r\n    setCheckedItems(item);\r\n  };\r\n  console.log(\"체크\", checkedItems);\r\n  const [delOpen, setDelOpen] = useState(false);\r\n\r\n  const handleDeleteClick = () => {\r\n    if (checkedItems.length === 0) {\r\n      setIsOpen(true);\r\n      setTitle(\"삭제할 대상이 없습니다.\");\r\n      setSubTitle(\"삭제할 학부모 계정을 선택해주세요.\");\r\n    } else {\r\n      console.log(\"학부모 정보 삭제\");\r\n      setDelOpen(true);\r\n      setTitle(\"정말 삭제할까요?\");\r\n      setSubTitle(\"학부모 정보가 삭제됩니다. 정말 삭제할까요?\");\r\n    }\r\n  };\r\n\r\n  const handleDelOk = () => {\r\n    const obj = {\r\n      iparents: [...checkedItems],\r\n    };\r\n    console.log(\"오비제이\", obj);\r\n    deleteParentList({\r\n      successFn,\r\n      errorFn,\r\n      obj,\r\n    });\r\n  };\r\n  const successFn = res => {\r\n    setIsOpen(true);\r\n    setTitle(\"삭제 완료\");\r\n    setSubTitle(\"삭제가 완료되었습니다.\");\r\n    setDelOpen(false);\r\n    setCheckedItems([]);\r\n  };\r\n  const errorFn = res => {\r\n    console.log(res);\r\n    setIsOpen(true);\r\n    setTitle(\"삭제 실패\");\r\n    setSubTitle(res);\r\n  };\r\n  const handleCancel = () => {\r\n    setDelOpen(false);\r\n  };\r\n  const handleOk = () => {\r\n    setIsOpen(false);\r\n    // 링크이동\r\n    if (isNavigate) {\r\n      navigate(isNavigate);\r\n    }\r\n  };\r\n\r\n  // 학부모 정보수정\r\n  const [editState, setEditState] = useState(0);\r\n  const onChildClick = () => {\r\n    // 자식 컴포넌트에서 호출할 함수\r\n    setEditState(prevState => prevState + 1);\r\n    console.log(\"돼라\");\r\n  };\r\n\r\n  // 학부모 리스트 GET\r\n  const [parentList, setParentList] = useState(initParentList);\r\n  const { isLogin } = useCustomLogin();\r\n  useEffect(() => {\r\n    if (!isLogin) {\r\n      setTitle(\"관리자 전용 페이지\");\r\n      setSubTitle(\"관리자만 접근 가능합니다.\");\r\n      setIsOpen(true);\r\n      setIsNavigate(`/login`);\r\n      return;\r\n    } else {\r\n      getAdminParentList({ successFn: successGetFn, errorGetFn, page, iclass });\r\n    }\r\n  }, [page, iclass, checkedItems, editState]);\r\n\r\n  const successGetFn = result => {\r\n    setParentList(result);\r\n  };\r\n\r\n  const errorGetFn = result => {\r\n    setParentList(result);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <UserTop>\r\n        <PageTitle>학부모 관리</PageTitle>\r\n        <UserTopRight>\r\n          <Dropdown menu={{ items: classItems }}>\r\n            <Button>\r\n              {iclass === \"0\"\r\n                ? \"반 전체\"\r\n                : iclass === \"1\"\r\n                ? \"무궁화반\"\r\n                : iclass === \"2\"\r\n                ? \"해바라기반\"\r\n                : iclass === \"3\"\r\n                ? \"장미반\"\r\n                : iclass === \"-1\"\r\n                ? \"졸업\"\r\n                : iclass === \"-2\"\r\n                ? \"퇴소\"\r\n                : \"반 선택\"}\r\n              <DownOutlined />\r\n            </Button>\r\n          </Dropdown>\r\n          <Search\r\n            placeholder=\"검색어를 입력하세요.\"\r\n            style={{\r\n              width: 200,\r\n            }}\r\n            allowClear\r\n          />\r\n          <GreenBtn onClick={handleDeleteClick}>선택회원삭제</GreenBtn>\r\n          {/* 안내창 */}\r\n          <ModalOneBtn\r\n            isOpen={isOpen}\r\n            handleOk={handleOk}\r\n            title={title}\r\n            subTitle={subTitle}\r\n          />\r\n          {/* 학부모 연결 삭제창 */}\r\n          <ModalTwoBtn\r\n            isOpen={delOpen}\r\n            handleOk={handleDelOk}\r\n            handleCancel={handleCancel}\r\n            title={title}\r\n            subTitle={subTitle}\r\n          />\r\n        </UserTopRight>\r\n      </UserTop>\r\n      <GuardianListComponent\r\n        iclass={iclass}\r\n        page={page}\r\n        parentList={parentList}\r\n        oncheckedClick={oncheckedClick}\r\n        checkedItems={checkedItems}\r\n        onChildClick={onChildClick}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GuardianList;\r\n"],"names":["_ref","isOpen","handleOk","handleCancel","title","subTitle","children","_jsxs","Modal","open","onOk","onCancel","closeIcon","width","footer","_jsx","PinkBtn","type","onClick","OrangeBtn","styles","display","justifyContent","gap","body","paddingTop","ModalTitle","ModalBody","initParentList","totalCnt","parentPage","iparent","parentNm","uid","phoneNb","kids","kidNm","iclass","GuardianList","serchParams","setSearchParams","useSearchParams","changeInfo","setChangeInfo","useState","navigate","useNavigate","page","get","classArr","useDispatch","classNm","classItems","Array","isArray","map","item","key","toString","label","Link","to","concat","setTitle","setSubTitle","setIsOpen","isNavigate","setIsNavigate","checkedItems","setCheckedItems","console","log","delOpen","setDelOpen","successFn","res","errorFn","editState","setEditState","parentList","setParentList","isLogin","useCustomLogin","useEffect","getAdminParentList","successGetFn","errorGetFn","result","_Fragment","UserTop","PageTitle","UserTopRight","Dropdown","menu","items","Button","DownOutlined","Search","placeholder","style","allowClear","GreenBtn","handleDeleteClick","length","ModalOneBtn","ModalTwoBtn","handleDelOk","obj","iparents","deleteParentList","GuardianListComponent","oncheckedClick","onChildClick","prevState"],"sourceRoot":""}