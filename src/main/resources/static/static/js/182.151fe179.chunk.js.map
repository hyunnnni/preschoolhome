{"version":3,"file":"static/js/182.151fe179.chunk.js","mappings":"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","sources":["styles/user/notialarm.js","components/user/NotiAlarm.js","atoms/pushState.js","fb/fbconfig.js","api/user/pushApi.js","components/common/NavBar.js","components/common/Footer.js","components/common/SideMenu.js","components/common/SideBar.js","layouts/MainLayout.js"],"sourcesContent":["import styled from \"@emotion/styled\";\r\nimport { boxStyle, colors } from \"../basic\";\r\n\r\nexport const NotiWrap = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nexport const NotiIcon = styled.div`\r\n  position: relative;\r\n  width: 3rem;\r\n  margin-right: -0.5rem;\r\n  cursor: pointer;\r\n  img {\r\n    width: 100%;\r\n  }\r\n\r\n  :after {\r\n    content: \"\";\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    width: 0.7rem;\r\n    height: 0.7rem;\r\n    background: ${colors.orangeDeep};\r\n    border-radius: 50%;\r\n    display: ${props => (props.state ? \"block\" : \"none\")};\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport {\r\n  NotiBox,\r\n  NotiIcon,\r\n  NotiList,\r\n  NotiWrap,\r\n} from \"../../styles/user/notialarm\";\r\n\r\nconst NotiAlarm = ({ state }) => {\r\n  return (\r\n    <NotiWrap>\r\n      <NotiIcon state={state}>\r\n        <img src={process.env.PUBLIC_URL + \"/images/common/bell_icon.svg\"} />\r\n      </NotiIcon>\r\n    </NotiWrap>\r\n  );\r\n};\r\n\r\nexport default NotiAlarm;\r\n","import { atom } from \"recoil\";\r\nimport { recoilPersist } from \"recoil-persist\";\r\n\r\nconst { persistAtom } = recoilPersist();\r\nconst pushState = atom({\r\n  key: \"pushState\",\r\n  default: { totalCnt: 0, pushList: {} },\r\n  effects_UNSTABLE: [persistAtom],\r\n});\r\n\r\nexport default pushState;\r\n","import { initializeApp } from \"firebase/app\";\r\nimport { getToken, getMessaging, onMessage } from \"firebase/messaging\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCuIKs9JwV9hTJyHRpthcaeZesm0h-Av1A\",\r\n  authDomain: \"preschoolhome-dfd2f.firebaseapp.com\",\r\n  projectId: \"preschoolhome-dfd2f\",\r\n  storageBucket: \"preschoolhome-dfd2f.appspot.com\",\r\n  messagingSenderId: \"1048681571637\",\r\n  appId: \"1:1048681571637:web:814c80c8d96efd581b187c\",\r\n  measurementId: \"G-0XB87NYZ32\",\r\n};\r\n\r\nconst firebaseApp = initializeApp(firebaseConfig);\r\nconst messaging = getMessaging(firebaseApp);\r\n\r\nexport const getFirebaseToken = async () => {\r\n  return await getToken(messaging, {\r\n    vapidKey:\r\n      \"BIGyGypgvEnUf_IZ6F_4nORnyj759Hpr3B4qAW5-q1VCJndDdabc87cjOyn4E83PkosZeEbToaGk2Nt0qhmufGk\",\r\n  });\r\n};\r\n\r\nexport const onMessageListener = () => {\r\n  return new Promise(resolve => {\r\n    onMessage(messaging, payload => {\r\n      console.log(\"onMessage\");\r\n      console.log(payload);\r\n      resolve(payload);\r\n    });\r\n  });\r\n};\r\n\r\nexport const onTokenRefresh = async () => {\r\n  return await getFirebaseToken()\r\n    .then(function (refreshedToken) {\r\n      console.log(refreshedToken);\r\n      console.log(\"Token refreshed.\");\r\n      return refreshedToken;\r\n    })\r\n    .catch(function (err) {\r\n      console.log(\"Unable to retrieve refreshed token \", err);\r\n    });\r\n};\r\n","import { getFirebaseToken, onMessageListener } from \"../../fb/fbconfig\";\r\nimport jwtAxios from \"../../util/jwtUtil\";\r\nimport { SERVER_URL } from \"../config\";\r\n\r\nconst parentFbPath = `${SERVER_URL}/api/parent/firebase-token`;\r\nconst teacherFbPath = `${SERVER_URL}/api/teacher/firebase-token`;\r\n\r\nexport const patchTeacherFbToken = async ({ params, successFn }) => {\r\n  try {\r\n    const res = await jwtAxios.patch(`${teacherFbPath}`, params);\r\n    const status = res.status.toString();\r\n    if (status.charAt(0) === \"2\") {\r\n      successFn(res);\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const patchParentFbToken = async ({ params, successFn }) => {\r\n  try {\r\n    const res = await jwtAxios.patch(`${parentFbPath}`, params);\r\n    const status = res.status.toString();\r\n    if (status.charAt(0) === \"2\") {\r\n      successFn(res);\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const getFbToken = async successFn => {\r\n  try {\r\n    const firebaseToken = await getFirebaseToken();\r\n    successFn(firebaseToken);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { HeaderBtn, NavWrap } from \"../../styles/basic\";\r\nimport {\r\n  GrayBtn,\r\n  GreenBtn,\r\n  OrangeBtn,\r\n  PinkBtn,\r\n  PurpleBtn,\r\n} from \"../../styles/ui/buttons\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport useCustomLogin from \"../../hooks/useCustomLogin\";\r\nimport NotiAlarm from \"../user/NotiAlarm\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport pushState from \"../../atoms/pushState\";\r\nimport { onMessageListener } from \"../../fb/fbconfig\";\r\nimport {\r\n  patchParentFbToken,\r\n  patchTeacherFbToken,\r\n  getFbToken,\r\n} from \"../../api/user/pushApi\";\r\n\r\nconst NavBar = () => {\r\n  const navigate = useNavigate();\r\n  const currentYear = new Date().getFullYear();\r\n  // 로그인정보 체크\r\n  const {\r\n    moveToPath,\r\n    doLogout,\r\n    loginState,\r\n    isLogin,\r\n    isAdminLogin,\r\n    isParentLogin,\r\n    isTeacherLogin,\r\n    refreshAccessToken,\r\n  } = useCustomLogin();\r\n  const ikidList = loginState.kidList;\r\n  const iclass = isLogin && !isTeacherLogin ? 0 : loginState.iclass;\r\n  const iteacher = loginState.iteacher;\r\n\r\n  // 로그아웃\r\n  const handleLogout = () => {\r\n    doLogout();\r\n    moveToPath(\"/\");\r\n  };\r\n  // 푸시알림\r\n  const [notiPush, setNotiPush] = useRecoilState(pushState);\r\n\r\n  // 알림사용 승인 후 firebase 토큰 가져오기\r\n  useEffect(() => {\r\n    if (Notification.permission !== \"granted\") {\r\n      Notification.requestPermission().then(permission => {\r\n        if (permission === \"granted\") {\r\n          getFbToken(successFn);\r\n        }\r\n      });\r\n    } else {\r\n      getFbToken(successFn);\r\n    }\r\n  }, [loginState]);\r\n  //firebase 토큰가져오기 성공 시 서버로 변경된 토큰 보냄\r\n  const successFn = res => {\r\n    const userFirebaseToken = isParentLogin\r\n      ? loginState.prFirebaseToken\r\n      : loginState.firebaseToken;\r\n\r\n    if (userFirebaseToken !== res && loginState.accessToken) {\r\n      let params = {\r\n        iteacher: loginState.iteacher,\r\n        firebaseToken: res,\r\n      };\r\n      if (isParentLogin) {\r\n        params = {\r\n          iparent: loginState.iparent,\r\n          firebaseToken: res,\r\n        };\r\n        patchParentFbToken({ params, successFn: successrefrash });\r\n      } else {\r\n        patchTeacherFbToken({ params, successFn: successrefrash });\r\n      }\r\n      console.log(params);\r\n    }\r\n  };\r\n\r\n  // firebase 토큰 갱신 하면 로그인 정보 다시 가져옴\r\n  const successrefrash = res => {\r\n    // const resultNum = res.data.result;\r\n    // if (resultNum === 1) {\r\n    //   refreshAccessToken();\r\n    // } else {\r\n    //   console.log(\"firebase 토큰업데이트 실패\");\r\n    // }\r\n    refreshAccessToken();\r\n  };\r\n\r\n  // 알림체크\r\n  onMessageListener()\r\n    .then(payload => {\r\n      const data = JSON.parse(payload.data);\r\n      console.log(data);\r\n      setNotiPush(prev => {\r\n        const copyDm = { ...prev };\r\n        const prevDm = copyDm.pushList[data.idm] || {\r\n          unCheckedMsgCnt: 0,\r\n          data: null,\r\n        };\r\n        prevDm.unCheckedMsgCnt++;\r\n        prevDm.data = data;\r\n        copyDm.pushList[data.idm] = prevDm;\r\n        copyDm.totalCnt++;\r\n        return copyDm;\r\n      });\r\n    })\r\n    .catch(error => console.log(error));\r\n\r\n  // console.log(\"리프레시\", loginState.accessToken);\r\n  // console.log(\"기존\", loginState.accessToken);\r\n  console.log(notiPush);\r\n  return (\r\n    <NavWrap>\r\n      <Link to={\"/\"} className=\"nav-logo\">\r\n        <img src={process.env.PUBLIC_URL + \"/images/common/header/logo.svg\"} />\r\n      </Link>\r\n      <p>\r\n        {isLogin\r\n          ? `${loginState.teacherNm} 환영합니다.`\r\n          : isParentLogin\r\n          ? \"학부모님 환영합니다.\"\r\n          : null}\r\n      </p>\r\n      {/* 푸시알림 */}\r\n      {!isAdminLogin ? (\r\n        <NotiAlarm state={notiPush.totalCnt === 0 ? false : true} />\r\n      ) : null}\r\n\r\n      <HeaderBtn>\r\n        {isLogin ? (\r\n          <>\r\n            <GrayBtn\r\n              className=\"nav-btn\"\r\n              onClick={e =>\r\n                navigate(`/ind?year=${currentYear}&page=1&iclass=${iclass}`)\r\n              }\r\n            >\r\n              알림장목록\r\n            </GrayBtn>\r\n\r\n            <PurpleBtn\r\n              className=\"nav-btn\"\r\n              onClick={e => navigate(`/admin?page=1&iclass=${iclass}`)}\r\n            >\r\n              학부모관리\r\n            </PurpleBtn>\r\n            <OrangeBtn\r\n              className=\"nav-btn\"\r\n              onClick={e =>\r\n                navigate(`/admin/student?page=1&kidCheck=${iclass}`)\r\n              }\r\n            >\r\n              원생관리\r\n            </OrangeBtn>\r\n            {isTeacherLogin ? (\r\n              <PinkBtn\r\n                className=\"nav-btn\"\r\n                onClick={e =>\r\n                  navigate(`/admin/teacher/edit?iteacher=${iteacher}`)\r\n                }\r\n              >\r\n                정보수정\r\n              </PinkBtn>\r\n            ) : null}\r\n            <GreenBtn\r\n              onClick={() => {\r\n                handleLogout();\r\n              }}\r\n            >\r\n              로그아웃\r\n            </GreenBtn>\r\n          </>\r\n        ) : isParentLogin ? (\r\n          <>\r\n            <GrayBtn\r\n              className=\"nav-btn\"\r\n              onClick={e =>\r\n                navigate(\r\n                  `/ind?year=${currentYear}&page=1&ikid=${\r\n                    ikidList[0] ? ikidList[0].ikid : 0\r\n                  }`,\r\n                )\r\n              }\r\n            >\r\n              알림장\r\n            </GrayBtn>\r\n            <OrangeBtn\r\n              className=\"nav-btn\"\r\n              onClick={e =>\r\n                navigate(\r\n                  `/mypage?year=${currentYear}&ikid=${\r\n                    ikidList[0] ? ikidList[0].ikid : 0\r\n                  }`,\r\n                )\r\n              }\r\n            >\r\n              마이페이지\r\n            </OrangeBtn>\r\n            <GreenBtn\r\n              onClick={() => {\r\n                handleLogout();\r\n              }}\r\n            >\r\n              로그아웃\r\n            </GreenBtn>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <OrangeBtn onClick={e => navigate(\"user/accounts\")}>\r\n              회원가입\r\n            </OrangeBtn>\r\n            <GreenBtn onClick={e => navigate(\"login\")}>로그인</GreenBtn>\r\n          </>\r\n        )}\r\n      </HeaderBtn>\r\n    </NavWrap>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import React from \"react\";\r\nimport { FooterBg, FooterBus, FooterWrap } from \"../../styles/basic\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <FooterWrap>\r\n      <FooterBus />\r\n      <FooterBg>\r\n        <Link to=\"/\">copyright 떡잎방범대</Link>\r\n      </FooterBg>\r\n    </FooterWrap>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import { Menu } from \"antd\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useCustomLogin from \"../../hooks/useCustomLogin\";\r\n\r\nconst SideMenu = () => {\r\n  const { isLogin, isParentLogin, isTeacherLogin, loginState } =\r\n    useCustomLogin();\r\n  const currentYear = new Date().getFullYear();\r\n  const ikidList = loginState.kidList;\r\n  const iclass = isLogin && !isTeacherLogin ? 0 : loginState.iclass;\r\n  function getItem(label, key, icon, children, type) {\r\n    return {\r\n      key,\r\n      icon,\r\n      children,\r\n      label,\r\n      type,\r\n    };\r\n  }\r\n\r\n  const teacherItems = [\r\n    getItem(\r\n      <Link to={`/admin?page=1&iclass=${iclass}`}>학부모 관리</Link>,\r\n      \"5-1\",\r\n    ),\r\n    getItem(\r\n      <Link to={`/admin/student?page=1&kidCheck=${iclass}`}>원생 관리</Link>,\r\n      \"5-2\",\r\n    ),\r\n    getItem(<Link to=\"/admin/student/create\">원생 등록</Link>, \"5-3\"),\r\n    getItem(\r\n      <Link to={`/ind?year=${currentYear}&page=1&iclass=${iclass}`}>\r\n        알림장 목록\r\n      </Link>,\r\n      \"5-4\",\r\n    ),\r\n  ];\r\n  const items = [\r\n    getItem(\r\n      \"유치원 안내\",\r\n      \"1\",\r\n      <img\r\n        src={process.env.PUBLIC_URL + \"/images/common/sidebar/info_icon.svg\"}\r\n      />,\r\n      [\r\n        getItem(<Link to=\"/info/\">유치원 소개</Link>, \"1-1\"),\r\n        getItem(<Link to=\"/info/class\">유치원 현황</Link>, \"1-2\"),\r\n        getItem(<Link to=\"/info/location\">오시는 길</Link>, \"1-3\"),\r\n      ],\r\n    ),\r\n    getItem(\r\n      \"교육정보\",\r\n      \"2\",\r\n      <img\r\n        src={process.env.PUBLIC_URL + \"/images/common/sidebar/education.svg\"}\r\n      />,\r\n      [\r\n        // getItem(<Link to=\"/edu\">교육과정</Link>, \"2-1\"),\r\n        // getItem(<Link to=\"/edu/specialact\">방과후활동</Link>, \"2-2\"),\r\n        getItem(<Link to=\"/edu/hospital?page=1\">예방접종기관정보</Link>, \"2-3\"),\r\n      ],\r\n    ),\r\n    getItem(\r\n      \"활동앨범\",\r\n      \"3\",\r\n      <Link to=\"/album\">\r\n        <img\r\n          src={process.env.PUBLIC_URL + \"/images/common/sidebar/gallery.svg\"}\r\n        />\r\n      </Link>,\r\n    ),\r\n    getItem(\r\n      \"유치원 소식\",\r\n      \"4\",\r\n      <Link to=\"/notice\">\r\n        <img src={process.env.PUBLIC_URL + \"/images/common/sidebar/news.svg\"} />\r\n      </Link>,\r\n    ),\r\n  ];\r\n  if (isLogin && !isTeacherLogin) {\r\n    items.push(\r\n      getItem(\r\n        \"관리자\",\r\n        \"5\",\r\n        <img\r\n          src={process.env.PUBLIC_URL + \"/images/common/sidebar/manager.svg\"}\r\n        />,\r\n        teacherItems.concat([\r\n          getItem(\r\n            <Link to={`/admin/teacher?page=1&iclass=${iclass}&tcIsDel=0`}>\r\n              선생님 관리\r\n            </Link>,\r\n            \"5-5\",\r\n          ),\r\n        ]),\r\n      ),\r\n    );\r\n  }\r\n  if (isTeacherLogin) {\r\n    items.push(\r\n      getItem(\r\n        \"관리자\",\r\n        \"5\",\r\n        <img\r\n          src={process.env.PUBLIC_URL + \"/images/common/sidebar/manager.svg\"}\r\n        />,\r\n        teacherItems,\r\n      ),\r\n    );\r\n  }\r\n  if (isParentLogin) {\r\n    items.push(\r\n      getItem(\r\n        \"회원전용\",\r\n        \"6\",\r\n        <img\r\n          src={process.env.PUBLIC_URL + \"/images/common/sidebar/user.svg\"}\r\n        />,\r\n        [\r\n          getItem(\r\n            <Link\r\n              to={`/ind?year=${currentYear}&page=1&ikid=${\r\n                ikidList[0] ? ikidList[0].ikid : 0\r\n              }`}\r\n            >\r\n              알림장\r\n            </Link>,\r\n            \"6-1\",\r\n          ),\r\n          getItem(\r\n            <Link\r\n              to={`/mypage?year=${currentYear}&ikid=${\r\n                ikidList[0] ? ikidList[0].ikid : 0\r\n              }`}\r\n            >\r\n              마이페이지\r\n            </Link>,\r\n            \"6-2\",\r\n          ),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Menu\r\n      defaultSelectedKeys={[\"\"]}\r\n      mode=\"inline\"\r\n      items={items}\r\n      style={{ border: 0 }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SideMenu;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { LogoWrap, SideBarWrap } from \"../../styles/basic\";\r\nimport Sider from \"antd/es/layout/Sider\";\r\nimport SideMenu from \"./SideMenu\";\r\nimport { AllBtn } from \"../../styles/ui/buttons\";\r\n\r\nconst SideBar = () => {\r\n  const [collapsed, setCollapsed] = useState(false);\r\n  const sideMenuRef = useRef(null);\r\n  useEffect(() => {\r\n    const handleOutsideClose = e => {\r\n      if (\r\n        window.innerWidth <= 798 &&\r\n        !collapsed &&\r\n        !sideMenuRef.current.contains(e.target)\r\n      )\r\n        setCollapsed(true);\r\n    };\r\n    document.addEventListener(\"click\", handleOutsideClose);\r\n\r\n    return () => document.removeEventListener(\"click\", handleOutsideClose);\r\n  }, [collapsed]);\r\n\r\n  return (\r\n    <SideBarWrap ref={sideMenuRef}>\r\n      <Sider\r\n        breakpoint=\"lg\"\r\n        onCollapse={(collapsed, type) => {\r\n          setCollapsed(true);\r\n        }}\r\n        trigger={null}\r\n        collapsible\r\n        collapsed={collapsed}\r\n        theme=\"light\"\r\n      >\r\n        <LogoWrap>\r\n          <Link to={\"/\"}>\r\n            {collapsed ? (\r\n              <img\r\n                src={\r\n                  process.env.PUBLIC_URL + \"/images/common/header/smallLogo.svg\"\r\n                }\r\n              />\r\n            ) : (\r\n              <img\r\n                src={process.env.PUBLIC_URL + \"/images/common/header/logo.svg\"}\r\n              />\r\n            )}\r\n          </Link>\r\n        </LogoWrap>\r\n        <SideMenu />\r\n        <AllBtn type=\"text\" onClick={() => setCollapsed(!collapsed)}>\r\n          {collapsed ? \"펼치기\" : \"접기\"}\r\n        </AllBtn>\r\n      </Sider>\r\n    </SideBarWrap>\r\n  );\r\n};\r\n\r\nexport default SideBar;\r\n","import { Layout, theme } from \"antd\";\r\nimport { AllLayout, WrapMain } from \"../styles/basic\";\r\nimport NavBar from \"../components/common/NavBar\";\r\nimport Footer from \"../components/common/Footer\";\r\nimport SideBar from \"../components/common/SideBar\";\r\nimport { Outlet } from \"react-router\";\r\nconst MainLayout = ({ children }) => {\r\n  return (\r\n    <AllLayout className=\"layout-wrap\">\r\n      {/* 사이드바(전체메뉴)영역 */}\r\n      <SideBar />\r\n      <Layout>\r\n        {/* 상단네비영역 */}\r\n        <NavBar />\r\n        {/* 컨텐츠영역 */}\r\n        <WrapMain>\r\n          <Outlet />\r\n        </WrapMain>\r\n      </Layout>\r\n      {/* 하단푸터 */}\r\n      <Footer />\r\n    </AllLayout>\r\n  );\r\n};\r\nexport default MainLayout;\r\n"],"names":["NotiWrap","styled","div","_templateObject","_taggedTemplateLiteral","NotiIcon","_templateObject2","colors","orangeDeep","props","state","_ref","_jsx","children","src","persistAtom","recoilPersist","atom","key","default","totalCnt","pushList","effects_UNSTABLE","firebaseApp","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","messaging","getMessaging","getFirebaseToken","async","getToken","vapidKey","parentFbPath","concat","SERVER_URL","teacherFbPath","getFbToken","successFn","error","console","log","NavBar","navigate","useNavigate","currentYear","Date","getFullYear","moveToPath","doLogout","loginState","isLogin","isAdminLogin","isParentLogin","isTeacherLogin","refreshAccessToken","useCustomLogin","ikidList","kidList","iclass","iteacher","handleLogout","notiPush","setNotiPush","useRecoilState","pushState","useEffect","Notification","permission","requestPermission","then","res","prFirebaseToken","firebaseToken","accessToken","params","iparent","_ref2","jwtAxios","patch","status","toString","charAt","patchParentFbToken","successrefrash","patchTeacherFbToken","Promise","resolve","onMessage","payload","data","JSON","parse","prev","copyDm","prevDm","idm","unCheckedMsgCnt","catch","_jsxs","NavWrap","Link","to","className","teacherNm","NotiAlarm","HeaderBtn","_Fragment","GrayBtn","onClick","e","PurpleBtn","OrangeBtn","PinkBtn","GreenBtn","ikid","Footer","FooterWrap","FooterBus","FooterBg","SideMenu","getItem","label","icon","type","teacherItems","items","push","Menu","defaultSelectedKeys","mode","style","border","SideBar","collapsed","setCollapsed","useState","sideMenuRef","useRef","handleOutsideClose","window","innerWidth","current","contains","target","document","addEventListener","removeEventListener","SideBarWrap","ref","Sider","breakpoint","onCollapse","trigger","collapsible","theme","LogoWrap","AllBtn","AllLayout","Layout","WrapMain","Outlet"],"sourceRoot":""}