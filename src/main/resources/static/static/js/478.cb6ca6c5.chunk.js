"use strict";(self.webpackChunkkindergarden=self.webpackChunkkindergarden||[]).push([[478],{3478:(e,a,c)=>{c.r(a),c.d(a,{default:()=>x});var s=c(6834),i=c(2791),t=c(5847),r=(c(3955),c(3353)),n=c(4155),o=c(7689),l=c(1087),d=c(724),h=c(315),u=c(3359),g=c(1717),p=c(747),k=c(5816),m=c(2603),f=c(8188),y=c(184);const j=[{inotice:0,noticeTitle:"",noticeContents:"",kidNm:"",iclass:0,picCheck:0,cmtCheck:0,noticeCheck:0,createdAt:""}],x=()=>{const e=(0,o.s0)(),{pathname:a,search:c}=(0,o.TH)(),[x,T]=(0,l.lr)(),[C,S]=(0,i.useState)(j),[V,b]=(0,i.useState)(3),[L,v]=(0,i.useState)(0),F=x.get("year"),N=x.get("ikid"),Z=x.get("page"),w=x.get("iclass"),D=x.get("searchValue")||"",{loginState:q,isLogin:z,isParentLogin:A,isTeacherLogin:O,isAdminLogin:U}=(0,d.Z)(),B=q.kidList,[E,H]=(0,i.useState)(""),[P,_]=(0,i.useState)(""),[G,I]=(0,i.useState)(!1),[J,K]=(0,i.useState)();(0,i.useEffect)((()=>{if(A){if("0"===N)return H("\uc5f0\uacb0 \uc624\ub958"),_("\uc5f0\uacb0\ub41c \uc6d0\uc0dd \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),K(-1),void I(!0);(0,u.Dq)({page:Z,year:F,ikid:N,fromTo:V,search:"",errorFn:Q,successFn:M})}else if(z){if(!(O&&w==q.iclass||U))return H("\uc811\uadfc \uc81c\ud55c"),_("\ub2f4\ub2f9\ud55c \ubc18 \uc54c\ub9bc\uc7a5\ub9cc \uc5f4\ub78c \uac00\ub2a5\ud569\ub2c8\ub2e4."),K(-1),void I(!0);(0,u.yu)({page:Z,year:F,iclass:w,fromTo:V,search:D,errorFn:Q,successFn:M})}else I(!0),H("\ud68c\uc6d0 \uc804\uc6a9 \ud398\uc774\uc9c0"),_("\ub85c\uadf8\uc778 \ud68c\uc6d0\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4."),K("/login")}),[F,N,w,Z,V]);const M=e=>{S(e.list),v(e.noticeCnt)},Q=e=>{I(!0),H("\ub370\uc774\ud130 \uc5c6\uc74c"),_(e);const a=z?"/ind?year=".concat(F,"&page=1&iclass=").concat(w,"&searchValue=").concat(D):"/ind?year=".concat(F,"&page=1&ikid=").concat(N,"&searchValue=").concat(D);3!=V?(b(3),K(a)):K(-1)},R=a=>{const c=a.target.value,s=z?"/ind?year=".concat(F,"&page=1&iclass=").concat(w,"&searchValue=").concat(D,"&fromTo="):"/ind?year=".concat(F,"&page=1&ikid=").concat(N,"&searchValue=").concat(D,"&fromTo="),i=z&&"teacher"==c?1:z&&"parent"==c?0:A&&"parent"==c?1:A&&"teacher"==c?0:3;e(s+i,{state:{writer:c}}),b(i)},W=e=>{I(!0),H("\ub370\uc774\ud130 \uc5c6\uc74c"),_(e),T({page:1,year:F,iclass:w,fromTo:V,searchValue:""})};return(0,y.jsxs)(r.Nm,{children:[(0,y.jsx)(g.Z,{isOpen:G,handleOk:()=>{I(!1),J&&e(J)},title:E,subTitle:P}),(0,y.jsxs)(r.eN,{children:[(0,y.jsx)(l.rU,{to:a+c,className:"active",children:"\uc54c\ub9bc\uc7a5"}),(0,y.jsx)(l.rU,{to:"/ind/album",children:"\ucd94\uc5b5\uc568\ubc94"})]}),(0,y.jsxs)(n.BV,{className:"ind-btn-wrap",children:[(0,y.jsxs)(r.ih,{fromTo:V,isLogin:z,children:[(0,y.jsxs)("button",{onClick:e=>R(e),value:"teacher",className:"teacher",children:[z?"\ub0b4\uac00 \uc4f4":"\ub0b4\uac00 \ubc1b\uc740"," \uae00"]}),(0,y.jsxs)("button",{onClick:e=>R(e),value:"parent",className:"parent",children:[z?"\ub0b4\uac00 \ubc1b\uc740":"\ub0b4\uac00 \uc4f4"," \uae00"]}),3!=V?(0,y.jsx)("button",{onClick:e=>R(e),value:"all",children:"\ubaa8\uc544\ubcf4\uae30"}):null]}),(0,y.jsxs)(n.hs,{children:[z?(0,y.jsx)(k.Z,{iclass:w,indList:C,year:F,page:Z}):(0,y.jsx)(p.Z,{ikidList:B,indList:C,ikid:N,year:F,page:Z}),(0,y.jsx)(m.Z,{placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694.",allowClear:!0,onSearch:e=>{(e=>{A?((0,u.Dq)({page:1,year:F,ikid:N,fromTo:V,search:e,errorFn:W,successFn:M}),T({page:1,year:F,ikid:N,fromTo:V,searchValue:e})):z&&((0,u.yu)({page:1,year:F,iclass:w,fromTo:V,search:e,errorFn:W,successFn:M}),T({page:1,year:F,iclass:w,fromTo:V,searchValue:e}))})(e)},size:"large"}),(0,y.jsx)(f.lk,{onClick:()=>{e("/ind/write")},className:"btn",children:"\uae00\uc4f0\uae30"})]})]}),(0,y.jsx)(h.Z,{listData:C,year:F,ikid:N,iclass:w,page:Z}),(0,y.jsx)(t.V_,{children:(0,y.jsx)(s.Z,{defaultCurrent:Z,total:L,pageSize:12,onChange:(a,c)=>{e(z?"/ind?year=".concat(F,"&page=").concat(a,"&iclass=").concat(w,"&fromTo=").concat(V):"/ind?year=".concat(F,"&page=").concat(a,"&ikid=").concat(N,"&fromTo=").concat(V))}})})]})}}}]);
//# sourceMappingURL=478.cb6ca6c5.chunk.js.map