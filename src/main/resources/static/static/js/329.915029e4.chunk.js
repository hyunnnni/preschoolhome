"use strict";(self.webpackChunkkindergarden=self.webpackChunkkindergarden||[]).push([[329],{3329:(e,a,c)=>{c.r(a),c.d(a,{default:()=>f});var i=c(6834),s=c(2791),n=c(5847),t=(c(3955),c(3353)),r=c(4155),o=c(7689),l=c(1087),d=c(724),h=(c(8199),c(184));const g=e=>{let{listData:a,year:c,ikid:i,iclass:s,page:n}=e;const{loginState:r,isLogin:o,isParentLogin:g}=(0,d.Z)();return(0,h.jsx)(t.ti,{children:(0,h.jsx)(t.lt,{children:Array.isArray(a)&&0===a[0].inotice?(0,h.jsx)("div",{style:{textAlign:"center",width:"100%",marginTop:"5rem"},children:"\uc54c\ub9bc\uc7a5 \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):Array.isArray(a)&&a.map((e=>{return(0,h.jsx)(t.Ex,{className:1===e.noticeCheck?"notice":"",children:(0,h.jsxs)(l.rU,{to:o?"/ind/details/".concat(e.inotice,"?year=").concat(c,"&page=").concat(n,"&iclass=").concat(s):"/ind/details/".concat(e.inotice,"?year=").concat(c,"&page=").concat(n,"&ikid=").concat(i),children:[(0,h.jsxs)(t.qQ,{children:[(0,h.jsxs)(t.On,{children:[(a=e.iclass,1===a?"\ubb34\uad81\ud654\ubc18":2===a?"\ud574\ubc14\ub77c\uae30\ubc18":3===a?"\uc7a5\ubbf8\ubc18":-1===a?"\ud1f4\uc18c":-2===a?"\uc878\uc5c5":"")," ",e.kidNm]}),(0,h.jsxs)(t.BD,{children:[1===e.noticeCheck?(0,h.jsx)("img",{src:"/images/common/warning_icon.svg",alt:"file"}):null,(0,h.jsx)("span",{children:e.createdAt.split(" ")[0]}),(0,h.jsx)("b",{children:e.noticeTitle})]}),(0,h.jsxs)(t.mT,{children:[1===e.picCheck?(0,h.jsx)("img",{src:"/images/common/file_icon.svg",alt:"file"}):null,1===e.cmtCheck?(0,h.jsx)("img",{src:"/images/common/chat_icon.svg",alt:"file"}):null]})]}),(0,h.jsx)(t.Bq,{children:(0,h.jsx)("span",{children:e.noticeContents})})]})},e.inotice);var a}))})})};var u=c(3359),m=c(1717),p=c(747),x=c(5816),j=c(2603),k=c(8188);const y=[{inotice:0,noticeTitle:"",noticeContents:"",kidNm:"",iclass:0,picCheck:0,cmtCheck:0,noticeCheck:0,createdAt:""}],f=()=>{const e=(0,o.s0)(),{pathname:a,search:c}=(0,o.TH)(),[f,C]=(0,l.lr)(),[T,v]=(0,s.useState)(y),[L,S]=(0,s.useState)(3),[b,N]=(0,s.useState)(0),V=((new Date).getFullYear(),f.get("year")),w=f.get("ikid"),F=f.get("page"),A=f.get("iclass"),Z=f.get("searchValue")||"",{loginState:D,isLogin:q,isParentLogin:_,isTeacherLogin:B,isAdminLogin:O}=(0,d.Z)(),U=D.kidList,[z,E]=(0,s.useState)(""),[P,H]=(0,s.useState)(""),[Q,Y]=(0,s.useState)(!1),[G,I]=(0,s.useState)();(0,s.useEffect)((()=>{if(_){if("0"===w)return E("\uc5f0\uacb0 \uc624\ub958"),H("\uc5f0\uacb0\ub41c \uc6d0\uc0dd \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),I(-1),void Y(!0);(0,u.Dq)({page:F,year:V,ikid:w,fromTo:L,search:"",errorFn:K,successFn:J})}else if(q){if(!(B&&A==D.iclass||O))return E("\uc811\uadfc \uc81c\ud55c"),H("\ub2f4\ub2f9\ud55c \ubc18 \uc54c\ub9bc\uc7a5\ub9cc \uc5f4\ub78c \uac00\ub2a5\ud569\ub2c8\ub2e4."),I(-1),void Y(!0);(0,u.yu)({page:F,year:V,iclass:A,fromTo:L,search:Z,errorFn:K,successFn:J})}else Y(!0),E("\ud68c\uc6d0 \uc804\uc6a9 \ud398\uc774\uc9c0"),H("\ub85c\uadf8\uc778 \ud68c\uc6d0\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4."),I("/login")}),[V,w,A,F,L]);const J=e=>{v(e.list),N(e.noticeCnt)},K=e=>{Y(!0),E("\ub370\uc774\ud130 \uc5c6\uc74c"),H(e);const a=q?"/ind?year=".concat(V,"&page=1&iclass=").concat(A,"&searchValue=").concat(Z):"/ind?year=".concat(V,"&page=1&ikid=").concat(w,"&searchValue=").concat(Z);3!=L?(S(3),I(a)):I(-1)},M=a=>{const c=a.target.value,i=q?"/ind?year=".concat(V,"&page=1&iclass=").concat(A,"&searchValue=").concat(Z,"&fromTo="):"/ind?year=".concat(V,"&page=1&ikid=").concat(w,"&searchValue=").concat(Z,"&fromTo="),s=q&&"teacher"==c?1:q&&"parent"==c?0:_&&"parent"==c?1:_&&"teacher"==c?0:3;e(i+s,{state:{writer:c}}),S(s)},R=e=>{Y(!0),E("\ub370\uc774\ud130 \uc5c6\uc74c"),H(e),C({page:1,year:V,iclass:A,fromTo:L,searchValue:""})};return(0,h.jsxs)(t.Nm,{children:[(0,h.jsx)(m.Z,{isOpen:Q,handleOk:()=>{Y(!1),G&&e(G)},title:z,subTitle:P}),(0,h.jsxs)(t.eN,{children:[(0,h.jsx)(l.rU,{to:a+c,className:"active",children:"\uc54c\ub9bc\uc7a5"}),(0,h.jsx)(l.rU,{to:"/ind/album".concat(c),children:"\ucd94\uc5b5\uc568\ubc94"})]}),(0,h.jsxs)(r.BV,{className:"ind-btn-wrap",children:[(0,h.jsxs)(t.ih,{fromTo:L,isLogin:q,children:[(0,h.jsxs)("button",{onClick:e=>M(e),value:"teacher",className:"teacher",children:[q?"\ub0b4\uac00 \uc4f4":"\ub0b4\uac00 \ubc1b\uc740"," \uae00"]}),(0,h.jsxs)("button",{onClick:e=>M(e),value:"parent",className:"parent",children:[q?"\ub0b4\uac00 \ubc1b\uc740":"\ub0b4\uac00 \uc4f4"," \uae00"]}),3!=L?(0,h.jsx)("button",{onClick:e=>M(e),value:"all",children:"\ubaa8\uc544\ubcf4\uae30"}):null]}),(0,h.jsxs)(r.hs,{children:[q?(0,h.jsx)(x.Z,{iclass:A,indList:T,year:V,page:F}):(0,h.jsx)(p.Z,{ikidList:U,indList:T,ikid:w,year:V,page:F}),(0,h.jsx)(j.Z,{placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694.",allowClear:!0,onSearch:e=>{(e=>{_?((0,u.Dq)({page:1,year:V,ikid:w,fromTo:L,search:e,errorFn:R,successFn:J}),C({page:1,year:V,ikid:w,fromTo:L,searchValue:e})):q&&((0,u.yu)({page:1,year:V,iclass:A,fromTo:L,search:e,errorFn:R,successFn:J}),C({page:1,year:V,iclass:A,fromTo:L,searchValue:e}))})(e)},size:"large"}),(0,h.jsx)(k.lk,{onClick:()=>{e("/ind/write")},className:"btn",children:"\uae00\uc4f0\uae30"})]})]}),(0,h.jsx)(g,{listData:T,year:V,ikid:w,iclass:A,page:F}),(0,h.jsx)(n.V_,{children:(0,h.jsx)(i.Z,{defaultCurrent:F,total:b,pageSize:12,onChange:(a,c)=>{e(q?"/ind?year=".concat(V,"&page=").concat(a,"&iclass=").concat(A,"&fromTo=").concat(L):"/ind?year=".concat(V,"&page=").concat(a,"&ikid=").concat(w,"&fromTo=").concat(L))}})})]})}}}]);
//# sourceMappingURL=329.915029e4.chunk.js.map