"use strict";(self.webpackChunkkindergarden=self.webpackChunkkindergarden||[]).push([[513],{8513:(e,a,c)=>{c.r(a),c.d(a,{default:()=>L});var s=c(6834),i=c(2791),n=c(5847),t=(c(3955),c(3353)),r=c(4155),o=c(7689),l=c(1087),d=c(724),h=(c(8199),c(184));const g=e=>{let{listData:a,year:c,ikid:s,iclass:i,page:n}=e;const{loginState:r,isLogin:o,isParentLogin:g}=(0,d.Z)();return(0,h.jsx)(t.ti,{children:(0,h.jsx)(t.lt,{children:Array.isArray(a)&&0===a[0].inotice?(0,h.jsx)("div",{style:{textAlign:"center",width:"100%",marginTop:"5rem"},children:"\uc54c\ub9bc\uc7a5 \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):Array.isArray(a)&&a.map((e=>{return(0,h.jsx)(t.Ex,{className:1===e.noticeCheck?"notice":"",children:(0,h.jsxs)(l.rU,{to:o?"/ind/details/".concat(e.inotice,"?year=").concat(c,"&page=").concat(n,"&iclass=").concat(i):"/ind/details/".concat(e.inotice,"?year=").concat(c,"&page=").concat(n,"&ikid=").concat(s),children:[(0,h.jsxs)(t.qQ,{children:[(0,h.jsxs)(t.On,{children:[(a=e.iclass,1===a?"\ubb34\uad81\ud654\ubc18":2===a?"\ud574\ubc14\ub77c\uae30\ubc18":3===a?"\uc7a5\ubbf8\ubc18":-1===a?"\ud1f4\uc18c":-2===a?"\uc878\uc5c5":"")," ",e.kidNm]}),(0,h.jsxs)(t.BD,{children:[1===e.noticeCheck?(0,h.jsx)("img",{src:"/images/common/warning_icon.svg",alt:"file"}):null,(0,h.jsx)("span",{children:e.createdAt.split(" ")[0]}),(0,h.jsx)("b",{children:e.noticeTitle})]}),(0,h.jsxs)(t.mT,{children:[1===e.picCheck?(0,h.jsx)("img",{src:"/images/common/file_icon.svg",alt:"file"}):null,1===e.cmtCheck?(0,h.jsx)("img",{src:"/images/common/chat_icon.svg",alt:"file"}):null]})]}),(0,h.jsx)(t.Bq,{children:(0,h.jsx)("span",{children:e.noticeContents})})]})},e.inotice);var a}))})})};var u=c(3359),m=c(1717),p=c(747),k=c(5816),x=c(2603),j=c(8188),y=c(4880),f=c(3014);const C="".concat(f.L,"/api/memory"),T=async e=>{let{page:a,iclass:c,ikid:s,search:i,successFn:n,failFn:t,errorFn:r}=e;try{const e=await y.Z.get("".concat(C,"?page=").concat(a,"&iclass=").concat(c,"&ikid=").concat(s,"&search=").concat(i));"2"===e.status.toString().charAt(0)?n(e.data):t(e.data)}catch(o){r(o.response.data.message)}},v=[{inotice:0,noticeTitle:"",noticeContents:"",kidNm:"",iclass:0,picCheck:0,cmtCheck:0,noticeCheck:0,createdAt:""}],L=()=>{const e=(0,o.s0)(),{pathname:a,search:c}=(0,o.TH)(),[y,f]=(0,l.lr)(),[C,L]=(0,i.useState)(v),[b,F]=(0,i.useState)(3),[S,N]=(0,i.useState)(0),w=(new Date).getFullYear(),V=y.get("year"),A=y.get("ikid"),Z=y.get("page"),D=y.get("iclass"),_=y.get("searchValue")||"",{loginState:q,isLogin:B,isParentLogin:O,isTeacherLogin:U,isAdminLogin:z}=(0,d.Z)(),E=q.kidList,[P,H]=(0,i.useState)(""),[Q,Y]=(0,i.useState)(""),[G,I]=(0,i.useState)(!1),[J,K]=(0,i.useState)();(0,i.useEffect)((()=>{if(O){if("0"===A)return H("\uc5f0\uacb0 \uc624\ub958"),Y("\uc5f0\uacb0\ub41c \uc6d0\uc0dd \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."),K(-1),void I(!0);T({page:Z,iclass:D,ikid:A,search:C,errorFn:R,successFn:M})}else if(B){if(!(U&&D==q.iclass||z))return H("\uc811\uadfc \uc81c\ud55c"),Y("\ub2f4\ub2f9\ud55c \ubc18 \uc568\ubc94\ub9cc \uc5f4\ub78c \uac00\ub2a5\ud569\ub2c8\ub2e4."),K(-1),void I(!0);T({page:Z,iclass:D,fromTo:b,search:_,errorFn:R,successFn:M})}else I(!0),H("\ud68c\uc6d0 \uc804\uc6a9 \ud398\uc774\uc9c0"),Y("\ub85c\uadf8\uc778 \ud68c\uc6d0\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4."),K("/login")}),[V,A,D,Z,b]);const M=e=>{L(e.list),N(e.noticeCnt)},R=e=>{console.log(e);const a=B?"/ind?year=".concat(V,"&page=1&iclass=").concat(D,"&searchValue=").concat(_):"/ind?year=".concat(V,"&page=1&ikid=").concat(A,"&searchValue=").concat(_);3!=b?(F(3),K(a)):K(-1)},W=a=>{const c=a.target.value,s=B?"/ind?year=".concat(V,"&page=1&iclass=").concat(D,"&searchValue=").concat(_,"&fromTo="):"/ind?year=".concat(V,"&page=1&ikid=").concat(A,"&searchValue=").concat(_,"&fromTo="),i=B&&"teacher"==c?1:B&&"parent"==c?0:O&&"parent"==c?1:O&&"teacher"==c?0:3;e(s+i,{state:{writer:c}}),F(i)},X=e=>{I(!0),H("\ub370\uc774\ud130 \uc5c6\uc74c"),Y(e),f({page:1,year:V,iclass:D,fromTo:b,searchValue:""})};return(0,h.jsxs)(t.Nm,{children:[(0,h.jsx)(m.Z,{isOpen:G,handleOk:()=>{I(!1),J&&e(J)},title:P,subTitle:Q}),(0,h.jsxs)(t.eN,{children:[(0,h.jsx)(l.rU,{to:"/ind?year=".concat(w,"&page=1&ikid=").concat(E[0]?E[0].ikid:0),children:"\uc54c\ub9bc\uc7a5"}),(0,h.jsx)(l.rU,{to:"/ind/album".concat(c),className:"active",children:"\ucd94\uc5b5\uc568\ubc94"})]}),(0,h.jsxs)(r.BV,{className:"ind-btn-wrap",children:[B?(0,h.jsxs)(t.ih,{fromTo:b,isLogin:B,children:[(0,h.jsxs)("button",{onClick:e=>W(e),value:"teacher",className:"teacher",children:[B?"\ub0b4\uac00 \uc4f4":"\ub0b4\uac00 \ubc1b\uc740"," \uae00"]}),(0,h.jsxs)("button",{onClick:e=>W(e),value:"parent",className:"parent",children:[B?"\ub0b4\uac00 \ubc1b\uc740":"\ub0b4\uac00 \uc4f4"," \uae00"]}),3!=b?(0,h.jsx)("button",{onClick:e=>W(e),value:"all",children:"\ubaa8\uc544\ubcf4\uae30"}):null]}):(0,h.jsxs)(t.ih,{fromTo:b,isLogin:O,children:[(0,h.jsx)("button",{onClick:e=>W(e),value:"parent",className:"parent",children:"\ub0b4\uac00 \ubc1b\uc740 \uae00"}),3!=b?(0,h.jsx)("button",{onClick:e=>W(e),value:"all",children:"\ubaa8\uc544\ubcf4\uae30"}):null]}),(0,h.jsxs)(r.hs,{children:[B?(0,h.jsx)(k.Z,{iclass:D,indList:C,year:V,page:Z}):(0,h.jsx)(p.Z,{ikidList:E,indList:C,ikid:A,year:V,page:Z}),(0,h.jsx)(x.Z,{placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694.",allowClear:!0,onSearch:e=>{(e=>{O?((0,u.Dq)({page:1,year:V,ikid:A,fromTo:b,search:e,errorFn:X,successFn:M}),f({page:1,year:V,ikid:A,fromTo:b,searchValue:e})):B&&((0,u.yu)({page:1,year:V,iclass:D,fromTo:b,search:e,errorFn:X,successFn:M}),f({page:1,year:V,iclass:D,fromTo:b,searchValue:e}))})(e)},size:"large"}),B?(0,h.jsx)(j.lk,{onClick:()=>{e("/ind/write")},className:"btn",children:"\uae00\uc4f0\uae30"}):null]})]}),(0,h.jsx)(g,{listData:C,year:V,ikid:A,iclass:D,page:Z}),(0,h.jsx)(n.V_,{children:(0,h.jsx)(s.Z,{defaultCurrent:Z,total:S,pageSize:12,onChange:(a,c)=>{e(B?"/ind?year=".concat(V,"&page=").concat(a,"&iclass=").concat(D,"&fromTo=").concat(b):"/ind?year=".concat(V,"&page=").concat(a,"&ikid=").concat(A,"&fromTo=").concat(b))}})})]})}}}]);
//# sourceMappingURL=513.7d652db3.chunk.js.map